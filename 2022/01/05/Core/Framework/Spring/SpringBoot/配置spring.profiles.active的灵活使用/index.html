<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>配置spring | La La Land</title><meta name="author" content="czk997"><meta name="copyright" content="czk997"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="背景 很多时候，我们项目在开发环境和生成环境的环境配置是不一样的，例如，数据库配置，在开发的时候，我们一般用测试数据库，而在生产环境的时候，我们是用正式的数据，这时候，我们可以利用profile在不同的环境下配置用不同的配置文件或者不同的配置。 spring boot 提供 spring boot允许你通过命名约定按照一定的格式(application-{profile}.properties)来">
<meta property="og:type" content="article">
<meta property="og:title" content="配置spring">
<meta property="og:url" content="https://czk997.github.io/2022/01/05/Core/Framework/Spring/SpringBoot/%E9%85%8D%E7%BD%AEspring.profiles.active%E7%9A%84%E7%81%B5%E6%B4%BB%E4%BD%BF%E7%94%A8/">
<meta property="og:site_name" content="La La Land">
<meta property="og:description" content="背景 很多时候，我们项目在开发环境和生成环境的环境配置是不一样的，例如，数据库配置，在开发的时候，我们一般用测试数据库，而在生产环境的时候，我们是用正式的数据，这时候，我们可以利用profile在不同的环境下配置用不同的配置文件或者不同的配置。 spring boot 提供 spring boot允许你通过命名约定按照一定的格式(application-{profile}.properties)来">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2022-01-04T16:52:27.326Z">
<meta property="article:modified_time" content="2022-01-04T16:52:27.326Z">
<meta property="article:author" content="czk997">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/images/favicon.png"><link rel="canonical" href="https://czk997.github.io/2022/01/05/Core/Framework/Spring/SpringBoot/%E9%85%8D%E7%BD%AEspring.profiles.active%E7%9A%84%E7%81%B5%E6%B4%BB%E4%BD%BF%E7%94%A8/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '配置spring',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-01-05 00:52:27'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">49</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-folder-open"></i><span> Core</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Core/Java/"><span> Java</span></a></li><li><a class="site-page child" href="/categories/Core/Framework/"><span> Framework</span></a></li><li><a class="site-page child" href="/categories/Core/Algorithm/"><span> Algorithm</span></a></li><li><a class="site-page child" href="/categories/Core/DesignPattern/"><span> DesignPattern</span></a></li><li><a class="site-page child" href="/categories/Core/Network/"><span> Network</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-database"></i><span> Database</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Database/NoSQL/Redis/"><span> Redis</span></a></li><li><a class="site-page child" href="/categories/Database/SQL/MySQL/"><span> MySQL</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-project-diagram"></i><span> Projects</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Projects/Yango/"><span> Yango</span></a></li><li><a class="site-page child" href="/categories/Projects/LowCode/"><span> LowCode</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-tools"></i><span> Tools</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Tools/Git/"><span> Git</span></a></li><li><a class="site-page child" href="/categories/Tools/IDEA/"><span> IDEA</span></a></li><li><a class="site-page child" href="/categories/Tools/Maven/"><span> Maven</span></a></li><li><a class="site-page child" href="/categories/Tools/Ningx/"><span> Ningx</span></a></li><li><a class="site-page child" href="/categories/Tools/Linux/"><span> Linux</span></a></li><li><a class="site-page child" href="/categories/Tools/Docker/"><span> Docker</span></a></li><li><a class="site-page child" href="/categories/Tools/Jenkins/"><span> Jenkins</span></a></li><li><a class="site-page child" href="/categories/Tools/Kubernetes/"><span> Kubernetes</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">La La Land</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-folder-open"></i><span> Core</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Core/Java/"><span> Java</span></a></li><li><a class="site-page child" href="/categories/Core/Framework/"><span> Framework</span></a></li><li><a class="site-page child" href="/categories/Core/Algorithm/"><span> Algorithm</span></a></li><li><a class="site-page child" href="/categories/Core/DesignPattern/"><span> DesignPattern</span></a></li><li><a class="site-page child" href="/categories/Core/Network/"><span> Network</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-database"></i><span> Database</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Database/NoSQL/Redis/"><span> Redis</span></a></li><li><a class="site-page child" href="/categories/Database/SQL/MySQL/"><span> MySQL</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-project-diagram"></i><span> Projects</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Projects/Yango/"><span> Yango</span></a></li><li><a class="site-page child" href="/categories/Projects/LowCode/"><span> LowCode</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-tools"></i><span> Tools</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Tools/Git/"><span> Git</span></a></li><li><a class="site-page child" href="/categories/Tools/IDEA/"><span> IDEA</span></a></li><li><a class="site-page child" href="/categories/Tools/Maven/"><span> Maven</span></a></li><li><a class="site-page child" href="/categories/Tools/Ningx/"><span> Ningx</span></a></li><li><a class="site-page child" href="/categories/Tools/Linux/"><span> Linux</span></a></li><li><a class="site-page child" href="/categories/Tools/Docker/"><span> Docker</span></a></li><li><a class="site-page child" href="/categories/Tools/Jenkins/"><span> Jenkins</span></a></li><li><a class="site-page child" href="/categories/Tools/Kubernetes/"><span> Kubernetes</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">配置spring</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-04T16:52:27.326Z" title="发表于 2022-01-05 00:52:27">2022-01-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-01-04T16:52:27.326Z" title="更新于 2022-01-05 00:52:27">2022-01-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Core/">Core</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Core/Framework/">Framework</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Core/Framework/Spring/">Spring</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Core/Framework/Spring/SpringBoot/">SpringBoot</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="配置spring"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><p>背景</p>
<p>很多时候，我们项目在开发环境和生成环境的环境配置是不一样的，例如，数据库配置，在开发的时候，我们一般用测试数据库，而在生产环境的时候，我们是用正式的数据，这时候，我们可以利用profile在不同的环境下配置用不同的配置文件或者不同的配置。</p>
<p>spring boot 提供</p>
<p>spring boot允许你通过命名约定按照一定的格式(application-{profile}.properties)来定义多个配置文件，然后通过在application.properyies通过spring.profiles.active来具体激活一个或者多个配置文件，如果没有没有指定任何profile的配置文件的话，spring boot默认会启动application-default.properties。</p>
<p>profile的配置文件可以按照application.properyies的放置位置一样，放于以下四个位置：</p>
<p>当前目录的 “/config”的子目录下</p>
<p>当前目录下</p>
<p>classpath根目录的“/config”包下</p>
<p>classpath的根目录下</p>
<p>demo 演示</p>
<p>在这里我们就定义俩个profile文件，</p>
<p>application-sit.properties和application-prd.properties，</p>
<p>并在俩个文件中都分别</p>
<p>写上变量</p>
<p>我们在application.properyies也写上，并把profile切换到application-sit.properties的配置文件</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1716179-d4a3de10febe7e7c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p>
<p>我们在application.properyies也写上，并把profile切换到application-sit.properties的配置文件</p>
<p>#修改tomcat的默认的端口号，将8080改为8889</p>
<p>server.port=8889</p>
<p>#启用shutdown endpoint的HTTP访问</p>
<p>endpoints.shutdown.enabled=true</p>
<p>#不需要用户名密码验证</p>
<p>endpoints.shutdown.sensitive=false</p>
<p>#默认curvar值</p>
<p>curvar=default.curvar</p>
<p>#切换配置文件</p>
<p>spring.profiles.active=sit</p>
<p>可以通过这样子来测试</p>
<p>package HelloWord;</p>
<p>import org.springframework.beans.factory.annotation.Value;</p>
<p>import org.springframework.web.bind.annotation.RequestMapping;</p>
<p>import org.springframework.web.bind.annotation.RestController;</p>
<p>@RestController</p>
<p>@RequestMapping(“/task”)</p>
<p>public class TaskController {</p>
<p>  @RequestMapping(value = {“/“,””})</p>
<p>  public String hellTask(@Value(“${curvar}”)String cusvar ){</p>
<p>​    return “hello task !! my current variable is “ + cusvar;</p>
<p>  }</p>
<p>}</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1716179-8e43537c4af374aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p>
<p>分别定义俩个实现类来实现它</p>
<p>package config;</p>
<p>import org.springframework.context.annotation.Profile;</p>
<p>import org.springframework.stereotype.Component;</p>
<p>/**</p>
<p> * 测试数据库</p>
<p> */</p>
<p>@Component</p>
<p>@Profile(“sitdb”)</p>
<p>public class SitDBConnector implements DBConnector {</p>
<p>  @Override</p>
<p>  public void configure() {</p>
<p>​    System.out.println(“sit-db”);</p>
<p>  }</p>
<p>}</p>
<p>package config;</p>
<p>import org.springframework.context.annotation.Profile;</p>
<p>import org.springframework.stereotype.Component;</p>
<p>/**</p>
<p> * 生产数据库</p>
<p> */</p>
<p>@Component</p>
<p>@Profile(“prddb”)</p>
<p>public class PrdDBConnector implements DBConnector {</p>
<p>  @Override</p>
<p>  public void configure() {</p>
<p>​    System.out.println(“prd-db”);</p>
<p>  }</p>
<p>}</p>
<p>通过在配置文件激活具体使用哪个实现类</p>
<p>#修改tomcat的默认的端口号，将8080改为8889</p>
<p>server.port=8889</p>
<p>#启用shutdown endpoint的HTTP访问</p>
<p>endpoints.shutdown.enabled=true</p>
<p>#不需要用户名密码验证</p>
<p>endpoints.shutdown.sensitive=false</p>
<p>#默认curvar值</p>
<p>curvar=default.curvar</p>
<p>#切换配置文件</p>
<p>#修改tomcat的默认的端口号，将8080改为8889</p>
<p>server.port=8889</p>
<p>#启用shutdown endpoint的HTTP访问</p>
<p>endpoints.shutdown.enabled=true</p>
<p>#不需要用户名密码验证</p>
<p>endpoints.shutdown.sensitive=false</p>
<p>#默认curvar值</p>
<p>curvar=default.curvar</p>
<p>#切换配置文件</p>
<p>spring.profiles.active=sitdb</p>
<p>然后就可以这么使用</p>
<p>package HelloWord;</p>
<p>import config.DBConnector;</p>
<p>import org.springframework.beans.factory.annotation.Autowired;</p>
<p>import org.springframework.beans.factory.annotation.Value;</p>
<p>import org.springframework.context.annotation.ComponentScan;</p>
<p>import org.springframework.web.bind.annotation.RequestMapping;</p>
<p>​    import org.springframework.web.bind.annotation.RestController;</p>
<p>@RestController</p>
<p>@RequestMapping(“/task”)</p>
<p>@ComponentScan(basePackages={“config”})</p>
<p>public class TaskController {</p>
<p>  @Autowired DBConnector connector;</p>
<p>  @RequestMapping(value = {“/“,””})</p>
<p>  public String hellTask(@Value(“${curvar}”)String cusvar ){</p>
<p>​    connector.configure();//最终打印配置的db</p>
<p>​    return “hello task !! my current variable is “ + cusvar;</p>
<p>  }</p>
<p>}</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1716179-632ba08a6f4dc101.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/1716179-c958750dd3655188.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/1716179-02cb963d222c450a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p>
<p>以上就是spring boot用profile的作用。</p>
<p>以下为可选（主要是命令行使用）：</p>
<p>通过命令行设置属性值</p>
<p>相信使用过一段时间Spring Boot的用户，一定知道这条命令：java -jar xxx.jar –server.port=8888，通过使用–server.port属性来设置xxx.jar应用的端口为8888。</p>
<p>在命令行运行时，连续的两个减号–就是对application.properties中的属性值进行赋值的标识。所以，java -jar xxx.jar –server.port=8888命令，等价于我们在application.properties中添加属性server.port=8888，该设置在样例工程中可见，读者可通过删除该值或使用命令行来设置该值来验证。</p>
<p>通过命令行来修改属性值固然提供了不错的便利性，但是通过命令行就能更改应用运行的参数，那岂不是很不安全？是的，所以Spring Boot也贴心的提供了屏蔽命令行访问属性的设置，只需要这句设置就能屏蔽：SpringApplication.setAddCommandLineProperties(false)。</p>
<p>多环境配置</p>
<p>以上都不是重点，这才是重点，这才是重点，这才是重点，重要的事情说3遍。我们在开发Spring Boot应用时，通常同一套程序会被应用和安装到几个不同的环境，比如：开发、测试、生产等。其中每个环境的数据库地址、服务器端口等等配置都会不同，如果在为不同环境打包时都要频繁修改配置文件的话，那必将是个非常繁琐且容易发生错误的事。</p>
<p>对于多环境的配置，各种项目构建工具或是框架的基本思路是一致的，通过配置多份不同环境的配置文件，再通过打包命令指定需要打包的内容之后进行区分打包，Spring Boot也不例外，或者说更加简单。</p>
<p>在Spring Boot中多环境配置文件名需要满足application-{profile}.properties的格式，其中{profile}对应你的环境标识，比如：</p>
<p>application-dev.properties：开发环境</p>
<p>application-test.properties：测试环境</p>
<p>application-prod.properties：生产环境</p>
<p>至于哪个具体的配置文件会被加载，需要在application.properties文件中通过spring.profiles.active属性来设置，其值对应{profile}值。</p>
<p>如：spring.profiles.active=test就会加载application-test.properties配置文件内容</p>
<p>下面，以不同环境配置不同的服务端口为例，进行样例实验。</p>
<p> 针对各环境新建不同的配置文件application-dev.properties、application-test.properties、application-prod.properties</p>
<p> 在这三个文件均都设置不同的server.port属性，如：dev环境设置为8080，test环境设置为9090，prod环境设置为80</p>
<p> application.properties中设置spring.profiles.active=dev，就是说默认以dev环境设置</p>
<p>测试不同配置的加载：</p>
<p>执行java -jar xxx.jar，可以观察到服务端口被设置为8080，也就是默认的开发环境（dev）</p>
<p> 执行java -jar xxx.jar –spring.profiles.active=test，可以观察到服务端口被设置为9090，也就是测试环境的配置（test）</p>
<p> 执行java -jar xxx.jar –spring.profiles.active=prod，可以观察到服务端口被设置为80，也就是生产环境的配置（prod）</p>
<p>按照上面的实验，可以如下总结多环境的配置思路：</p>
<p>application.properties中配置通用内容，并设置spring.profiles.active=dev，以开发环境为默认配置</p>
<p>application-{profile}.properties中配置各个环境不同的内容</p>
<p>通过命令行方式去激活不同环境的配置。</p>
<p>多环境高级应用</p>
<p>在某些情况下，应用的某些业务逻辑可能需要有不同的实现。例如邮件服务，假设EmailService中包含的send(String email)方法向指定地址发送电子邮件，但是我们仅仅希望在生产环境中才执行真正发送邮件的代码，而开发环境里则不发送以免向用户发送无意义的垃圾邮件。</p>
<p>我们可以借助Spring的注解@Profile实现这样的功能，这样需要定义两个实现EmailService借口的类：</p>
<p>/**</p>
<p> * 发送邮件接口.</p>
<p> */</p>
<p>public interface EmailService {</p>
<p>  /*<em>发送邮件</em>/</p>
<p>  publicvoid send();</p>
<p>}</p>
<p>发送邮件的具体实现（dev-开发环境的代码）：</p>
<p>@Service</p>
<p>@Profile(“dev”) //开发环境的时候.</p>
<p>public class DevEmailServiceImpl implements EmailService{</p>
<p>  @Override</p>
<p>  publicvoid send() {</p>
<p>​    System.out.println(“DevEmailServiceImpl.send().开发环境不执行邮件的发送.”);</p>
<p>  }</p>
<p>}</p>
<p>发送邮件的具体实现（prod-生产环境的代码）：</p>
<p>@Service</p>
<p>@Profile(“prod”) //生产环境.</p>
<p>public class ProdEmailServiceImpl2 implements EmailService{</p>
<p>  @Override</p>
<p>  publicvoid send() {</p>
<p>​    System.out.println(“DevEmailServiceImpl.send().生产环境执行邮件的发送.”);</p>
<p>​    //具体的邮件发送代码.</p>
<p>​    //mail.send();</p>
<p>  }</p>
<p>}</p>
<p>Profile(“dev”)表明只有Spring定义的Profile为dev时才会实例化DevEmailService这个类。那么如何设置Profile呢？</p>
<p>在application.properties中加入：</p>
<p>spring.profiles.active=dev</p>
<p>通过命令行参数</p>
<p>java -jar app.jar –spring.profiles.active=dev</p>
<p>作者：WRFranky<br>链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/e6ef9893cd63">https://www.jianshu.com/p/e6ef9893cd63</a><br>来源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">czk997</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">49</div></a></div></div></div><div class="sticky_layout"></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By czk997</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>